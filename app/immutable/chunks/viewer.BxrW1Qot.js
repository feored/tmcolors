import{a as x,t as T}from"./disclose-version.D3AYHp50.js";import{h as m,ax as R,r as $,N as z,ac as M,P as B,s as F,V,w as u,ad as G,c as b,a as y}from"./runtime.D7el5r4C.js";import{s as P}from"./render.C9mzKRzl.js";import{f as U,e as j,r as H,i as X}from"./attributes.CafjwoZJ.js";import{a as A}from"./props.BkHM9-H5.js";function Y(e,t){var r=e.__className,a=q(t);m&&e.className===a?e.__className=a:(r!==a||m&&e.className!==a)&&(t==null?e.removeAttribute("class"):e.className=a,e.__className=a)}function q(e){return e??""}function p(e,t,r,a,s){var o=e.__attributes??(e.__attributes={}),c=e.style,i="style-"+t;o[i]===r&&!s||(o[i]=r,r==null?c.removeProperty(t):c.setProperty(t,r,""))}function L(e,t,r,a=r){e.addEventListener(t,r);const s=e.__on_r;s?e.__on_r=()=>{s(),a()}:e.__on_r=a,U()}function J(e,t,r=t){var a=R();L(e,"input",()=>{var s=E(e)?I(e.value):e.value;r(s),a&&s!==(s=t())&&(e.value=s??"")}),$(()=>{var s=t();if(m&&e.defaultValue!==e.value){r(e.value);return}E(e)&&s===I(e.value)||e.type==="date"&&!s&&!e.value||(e.value=s??"")})}function he(e,t,r=t){L(e,"change",()=>{var a=e.checked;r(a)}),t()==null&&r(!1),$(()=>{var a=t();e.checked=!!a})}function E(e){var t=e.type;return t==="number"||t==="range"}function I(e){return e===""?null:+e}const f={color:"#fff",bold:!1,italic:!1,shadow:!1,uppercase:!1,width:"normal"},h="$",K=["i","o","s","w","n","g","m","z","t"],Q="0123456789ABCDEF",W="#fff";function w(e,t){return e.color==t.color&&e.bold==t.bold&&e.italic==t.italic&&e.shadow==t.shadow&&e.width==t.width&&e.uppercase==t.uppercase}function g(e){e[0]=="#"&&(e=e.slice(1));var t=parseInt(e,16),r=t>>16&255,a=t>>8&255,s=t&255;return[r,a,s]}function Z(e,t,r){return"#"+(1<<24|e<<16|t<<8|r).toString(16).slice(1)}function O(e,t,r){return"#"+[e,t,r].map(a=>Math.round(a/17).toString(16)).join("")}function ve(e){let t=g(e);return O(t[0],t[1],t[2])}function de(e){let t=g(e);for(let r=0;r<3;r++)t[r]=Math.round(t[r]/17)*17;return Z(t[0],t[1],t[2])}function ee(e){switch(e){case"i":return 2;case"o":return 1;case"s":return 5;case"w":return 4;case"n":return 3;case"g":return 10;case"m":return 11;case"z":return 12;case"t":return 8;default:return 7}}function te(e){if(e[0]!=h||e.length<2)return{is_color:!1,color_value:"",skip:0};let t=e.slice(1),r=0;for(let s=0;s<3&&!(t.length<s+1||!Q.includes(t[s].toUpperCase()));s++)r++;if(r==0)return{is_color:!1,color_value:"",skip:0};let a="";for(let s=0;s<r;s++)a+=t[s];return a=a.padEnd(3,"0"),{is_color:!0,color_value:a,skip:r}}function re(e){if(e[0]!=h)return{type:0,value:e[0],skip:0};if(e.length==1)return{type:7,value:e[0],skip:0};if(e[1]==h)return{type:9,value:h,skip:1};let{is_color:t,color_value:r,skip:a}=te(e);return t?{type:6,value:r,skip:a}:K.includes(e[1])?{type:ee(e[1]),value:"",skip:1}:{type:7,value:e[1],skip:1}}function se(e){let t=[];for(let r=0;r<e.length;r++){let a=re(e.slice(r));t.push(a),r+=a.skip}return t}function ae(e,t,r){var a=t.map((s,o)=>s-e[o]);return e.map((s,o)=>s+a[o]*r)}function ye(e,t,r=!1){let a=D(e,!1),s=a;r||(s=s.filter(l=>!N(l.text)));let o=[...t];s.length<t.length&&(o=o.slice(0,s.length));let c=o.length-1,i=Math.floor(s.length/c),_=[...s];for(let l=0;l<s.length;l++){var k=o[Math.min(Math.floor(l/i),c)],v=o[Math.min(Math.floor(l/i)+1,c)],n=Math.min(1,l%i/i);let d=ae(g(k),g(v),n),S=O(d[0],d[1],d[2]).slice(1);_[l].style.color="#"+S}if(!r)for(let l=0;l<a.length;l++)N(a[l].text)&&_.splice(l,0,{style:l>0?{...a[l-1].style}:{...f},text:a[l].text});return C(_)}function N(e){return e!=""&&e.trim()==""}function ke(e){console.log("STARTING TMDATA TO TEXT");let t=[],r={...f};for(let s=0;s<e.length;s++){if(!w(r,f)&&w(e[s].style,f))t.push({type:12,value:"",skip:0}),r={...f};else{if(e[s].style.color!=r.color&&(e[s].style.color!=W?(console.log("CHANGE IN COLOR, ORIGINAL:"),console.log(e[s].style.color),t.push({type:6,value:e[s].style.color.slice(1,4),skip:0})):t.push({type:10,value:"",skip:0}),r.color=e[s].style.color),e[s].style.width!=r.width){switch(e[s].style.width){case"narrow":t.push({type:3,value:"",skip:0});break;case"wide":t.push({type:4,value:"",skip:0});break;case"normal":t.push({type:11,value:"",skip:0});break}r.width=e[s].style.width}e[s].style.uppercase!=r.uppercase&&(t.push({type:8,value:"",skip:0}),r.uppercase=e[s].style.uppercase),e[s].style.bold!=r.bold&&(t.push({type:1,value:"",skip:0}),r.bold=e[s].style.bold),e[s].style.italic!=r.italic&&(t.push({type:2,value:"",skip:0}),r.italic=e[s].style.italic),e[s].style.shadow!=r.shadow&&(t.push({type:5,value:"",skip:0}),r.shadow=e[s].style.shadow)}for(let o=0;o<e[s].text.length;o++)e[s].text[o]==h?t.push({type:9,value:h,skip:0}):t.push({type:0,value:e[s].text[o],skip:0})}return console.log(t),le(t)}function le(e){let t="";for(let r of e)switch(r.type){case 0:t+=r.value;break;case 9:t+="$$";break;case 6:t+="$"+r.value;break;case 1:t+="$o";break;case 2:t+="$i";break;case 10:t+="$g";break;case 12:t+="$z";break;case 3:t+="$n";break;case 5:t+="$s";break;case 8:t+="$t";break;case 4:t+="$w";break;case 11:t+="$m";break}return t}function C(e){for(let r=e.length-1;r>0;r--)w(e[r].style,e[r-1].style)&&(e[r-1].text+=e[r].text,e[r].text="");return e.filter(r=>r.text.length>0)}function oe(e,t=!0){let r=[],a={...f};for(const s of e){if(s.type==0||s.type==9){r.push({style:{...a},text:s.value});continue}switch(s.type){case 1:a.bold=!a.bold;break;case 2:a.italic=!a.italic;break;case 8:a.uppercase=!a.uppercase;break;case 5:a.shadow=!0;break;case 4:a.width="wide";break;case 3:a.width="narrow";break;case 6:a.color="#"+s.value;break;case 10:a.color=f.color;break;case 11:a.width=f.width;break;case 12:a={...f};break}}return t?C(r):r}function D(e,t=!0){let r=se(e);return oe(r,t)}var ie=T("<span> </span>"),ce=T('<section><div class="flex row align-center" style="gap:1rem;"><div id="result" class="grow svelte-73bbtl"></div> <div class="shrink"><input title="Background Color" id="bgcolor" type="color"></div></div></section>');function be(e,t){z(t,!0);let r=G("#000000"),a=A(t,"tm_text",3,""),s=A(t,"tm_data",19,()=>[]);var o=ce(),c=b(o),i=b(c);j(i,21,()=>s().length==0?D(a()):s(),X,(v,n)=>{var l=ie(),d=b(l);y(l),M(()=>{Y(l,`${u(n).style.width??""} svelte-73bbtl`),p(l,"color",u(n).style.color),p(l,"font-weight",u(n).style.bold?"bold":"normal"),p(l,"font-style",u(n).style.italic?"italic":"normal"),p(l,"text-transform",u(n).style.uppercase?"uppercase":"none"),p(l,"text-shadow",u(n).style.shadow?"1px 1px 2px black":"none"),P(d,u(n).text)}),x(v,l)}),y(i);var _=F(i,2),k=b(_);H(k),y(_),y(c),y(o),M(()=>p(i,"background-color",u(r))),J(k,()=>u(r),v=>V(r,v)),x(e,o),B()}export{be as V,J as a,he as b,D as c,C as d,ye as e,de as f,ve as h,L as l,ke as t};
