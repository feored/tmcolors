import{a as k,t as x}from"./disclose-version.Cg5idkrA.js";import{l as b,ax as D,r as E,N as M,ae as m,P as S,s as B,V as C,i,at as L,c as v,a as f}from"./runtime.A0h7HhBa.js";import{s as z}from"./render.BoEcs_HF.js";import{f as F,e as T,a as V,i as O}from"./attributes.BEtewMVf.js";import{a as P}from"./props.D_RLLIAb.js";function R(e,t){var r=e.__className,a=U(t);b&&e.className===a?e.__className=a:(r!==a||b&&e.className!==a)&&(t==null?e.removeAttribute("class"):e.className=a,e.__className=a)}function U(e){return e??""}function u(e,t,r,a,s){var l=e.__attributes??(e.__attributes={}),o=e.style,_="style-"+t;l[_]===r&&!s||(l[_]=r,r==null?o.removeProperty(t):o.setProperty(t,r,""))}function I(e,t,r,a=r){e.addEventListener(t,r);const s=e.__on_r;s?e.__on_r=()=>{s(),a()}:e.__on_r=a,F()}function X(e,t,r=t){var a=D();I(e,"input",()=>{var s=g(e)?w(e.value):e.value;r(s),a&&s!==(s=t())&&(e.value=s??"")}),E(()=>{var s=t();if(b&&e.defaultValue!==e.value){r(e.value);return}g(e)&&s===w(e.value)||e.type==="date"&&!s&&!e.value||(e.value=s??"")})}function le(e,t,r=t){I(e,"change",()=>{var a=e.checked;r(a)}),t()==null&&r(!1),E(()=>{var a=t();e.checked=!!a})}function g(e){var t=e.type;return t==="number"||t==="range"}function w(e){return e===""?null:+e}const d={color:"#fff",bold:!1,italic:!1,shadow:!1,uppercase:!1,width:"normal"},p="$",j=["i","o","s","w","n","g","m","z","t"],H="0123456789ABCDEF";function A(e){e[0]=="#"&&(e=e.slice(1));var t=parseInt(e,16),r=t>>16&255,a=t>>8&255,s=t&255;return[r,a,s]}function Y(e,t,r){return"#"+(1<<24|e<<16|t<<8|r).toString(16).slice(1)}function q(e,t,r){return"#"+[e,t,r].map(a=>Math.round(a/17).toString(16)).join("")}function oe(e){let t=A(e);return q(t[0],t[1],t[2])}function ne(e){let t=A(e);for(let r=0;r<3;r++)t[r]=Math.round(t[r]/17)*17;return Y(t[0],t[1],t[2])}function G(e){switch(e){case"i":return 2;case"o":return 1;case"s":return 5;case"w":return 4;case"n":return 3;case"g":return 10;case"m":return 11;case"z":return 12;case"t":return 8;default:return 7}}function J(e){if(e[0]!=p||e.length<2)return{is_color:!1,color_value:"",skip:0};let t=e.slice(1),r=0;for(let s=0;s<3&&!(t.length<s+1||!H.includes(t[s].toUpperCase()));s++)r++;if(r==0)return{is_color:!1,color_value:"",skip:0};let a="";for(let s=0;s<r;s++)a+=t[s];return a=a.padEnd(3,"0"),{is_color:!0,color_value:a,skip:r}}function K(e){if(e[0]!=p)return{type:0,value:e[0],skip:0};if(e.length==1)return{type:7,value:e[0],skip:0};if(e[1]==p)return{type:9,value:p,skip:1};let{is_color:t,color_value:r,skip:a}=J(e);return t?{type:6,value:r,skip:a}:j.includes(e[1])?{type:G(e[1]),value:"",skip:1}:{type:7,value:e[1],skip:1}}function Q(e){let t=[];for(let r=0;r<e.length;r++){let a=K(e.slice(r));t.push(a),r+=a.skip}return t}function W(e){let t=Q(e),r=[],a={...d},s=(l,o)=>l.color==o.color&&l.bold==o.bold&&l.italic==o.italic&&l.shadow==o.shadow&&l.width==o.width&&l.uppercase==o.uppercase;for(const l of t){if(l.type==0||l.type==9){r.length==0||!s(r[r.length-1].style,a)?r.push({style:{...a},text:l.value}):r[r.length-1].text+=l.value;continue}switch(l.type){case 1:a.bold=!a.bold;break;case 2:a.italic=!a.italic;break;case 8:a.uppercase=!a.uppercase;break;case 5:a.shadow=!0;break;case 4:a.width="wide";break;case 3:a.width="narrow";break;case 6:a.color="#"+l.value;break;case 10:a.color=d.color;break;case 11:a.width=d.width;break;case 12:a={...d};break}}return r}var Z=x("<span> </span>"),$=x('<section><div class="flex row align-center" style="gap:1rem;"><div id="result" class="grow svelte-73bbtl"></div> <div class="shrink"><input title="Background Color" id="bgcolor" type="color"></div></div></section>');function ie(e,t){M(t,!0);let r=L("#000000"),a=P(t,"tm_text",3,"");var s=$(),l=v(s),o=v(l);T(o,21,()=>W(a()),O,(h,c)=>{var n=Z(),N=v(n);f(n),m(()=>{R(n,`${i(c).style.width??""} svelte-73bbtl`),u(n,"color",i(c).style.color),u(n,"font-weight",i(c).style.bold?"bold":"normal"),u(n,"font-style",i(c).style.italic?"italic":"normal"),u(n,"text-transform",i(c).style.uppercase?"uppercase":"none"),u(n,"text-shadow",i(c).style.shadow?"1px 1px 2px black":"none"),z(N,i(c).text)}),k(h,n)}),f(o);var _=B(o,2),y=v(_);V(y),f(_),f(l),f(s),m(()=>u(o,"background-color",i(r))),X(y,()=>i(r),h=>C(r,h)),k(e,s),S()}export{ie as V,le as a,X as b,ne as c,oe as d,A as h,I as l,q as r};
