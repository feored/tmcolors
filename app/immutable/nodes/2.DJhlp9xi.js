import{b as de,e as We,a as H,t as X,c as qe}from"../chunks/disclose-version.BZechZSN.js";import{J as Ve,b as ye,h as x,T as P,V as ae,ak as ke,M as oe,t as Pe,_ as xe,ad as Ye,ae as _e,R as j,c as N,W as Xe,af as Ae,a as ne,ag as Ge,al as Je,x as Ke,m as ve,am as se,j as T,an as ie,ao as Qe,H as Ze,s as he,ap as je,Z as Re,aq as et,d as $e,ar as tt,O as Ee,X as at,Q as rt,as as lt,at as ot,au as nt,v as st,p as Te,a9 as Y,e as Ie,l as b,aa as k,ab as w,ac as h,aj as F,f as it,n as ct,av as ft}from"../chunks/runtime.PRj5TK2d.js";import{s as re,d as ut}from"../chunks/render.Bc_DcOSm.js";import{p as dt,b as _t,a as vt}from"../chunks/props.zwv2bsT_.js";let ee=null;function Ce(e,t){return t}function ht(e,t,a,r){for(var l=[],o=t.length,n=0;n<o;n++)je(t[n].e,l,!0);var i=o>0&&l.length===0&&a!==null;if(i){var f=a.parentNode;Re(f),f.append(a),r.clear(),S(e,t[0].prev,t[o-1].next)}et(l,()=>{for(var u=0;u<o;u++){var v=t[u];i||(r.delete(v.k),S(e,v.prev,v.next)),$e(v.e,!i)}})}function Se(e,t,a,r,l,o=null){var n=e,i={flags:t,items:new Map,first:null},f=(t&ke)!==0;if(f){var u=e;n=x?P(oe(u)):u.appendChild(Ve())}x&&ae();var v=null;ye(()=>{var s=a(),g=Pe(s)?s:s==null?[]:xe(s),_=g.length;let p=!1;if(x){var A=n.data===Ye;A!==(_===0)&&(n=_e(),P(n),j(!1),p=!0)}if(x){for(var y=null,$,m=0;m<_;m++){if(N.nodeType===8&&N.data===Xe){n=N,p=!0,j(!1);break}var c=g[m],d=r(c,m);$=Le(N,i,y,null,c,d,m,l,t),i.items.set(d,$),y=$}_>0&&P(_e())}x||pt(g,i,n,l,t,r),o!==null&&(_===0?v?Ae(v):v=ne(()=>o(n)):v!==null&&Ge(v,()=>{v=null})),p&&j(!0)}),x&&(n=N)}function pt(e,t,a,r,l,o){var z,W,L,q;var n=(l&tt)!==0,i=(l&(se|ie))!==0,f=e.length,u=t.items,v=t.first,s=v,g,_=null,p,A=[],y=[],$,m,c,d;if(n)for(d=0;d<f;d+=1)$=e[d],m=o($,d),c=u.get(m),c!==void 0&&((z=c.a)==null||z.measure(),(p??(p=new Set)).add(c));for(d=0;d<f;d+=1){if($=e[d],m=o($,d),c=u.get(m),c===void 0){var G=s?s.e.nodes_start:a;_=Le(G,t,_,_===null?t.first:_.next,$,m,d,r,l),u.set(m,_),A=[],y=[],s=_.next;continue}if(i&&bt(c,$,d,l),c.e.f&Je&&(Ae(c.e),n&&((W=c.a)==null||W.unfix(),(p??(p=new Set)).delete(c))),c!==s){if(g!==void 0&&g.has(c)){if(A.length<y.length){var C=y[0],R;_=C.prev;var M=A[0],O=A[A.length-1];for(R=0;R<A.length;R+=1)pe(A[R],C,a);for(R=0;R<y.length;R+=1)g.delete(y[R]);S(t,M.prev,O.next),S(t,_,M),S(t,O,C),s=C,_=O,d-=1,A=[],y=[]}else g.delete(c),pe(c,s,a),S(t,c.prev,c.next),S(t,c,_===null?t.first:_.next),S(t,_,c),_=c;continue}for(A=[],y=[];s!==null&&s.k!==m;)(g??(g=new Set)).add(s),y.push(s),s=s.next;if(s===null)continue;c=s}A.push(c),_=c,s=c.next}if(s!==null||g!==void 0){for(var I=g===void 0?[]:xe(g);s!==null;)I.push(s),s=s.next;var D=I.length;if(D>0){var U=l&ke&&f===0?a:null;if(n){for(d=0;d<D;d+=1)(L=I[d].a)==null||L.measure();for(d=0;d<D;d+=1)(q=I[d].a)==null||q.fix()}ht(t,I,U,u)}}n&&Ke(()=>{var E;if(p!==void 0)for(c of p)(E=c.a)==null||E.apply()}),ve.first=t.first&&t.first.e,ve.last=_&&_.e}function bt(e,t,a,r){r&se&&T(e.v,t),r&ie?T(e.i,a):e.i=a}function Le(e,t,a,r,l,o,n,i,f){var u=ee;try{var v=(f&se)!==0,s=(f&Qe)===0,g=v?s?Ze(l):he(l):l,_=f&ie?he(n):n,p={i:_,v:g,k:o,a:null,e:null,prev:a,next:r};return ee=p,p.e=ne(()=>i(e,g,_),x),p.e.prev=a&&a.e,p.e.next=r&&r.e,a===null?t.first=p:(a.next=p,a.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{ee=u}}function pe(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,o=e.e.nodes_start;o!==r;){var n=Ee(o);l.before(o),o=n}}function S(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function gt(e,t,a,r,l){var o=e,n="",i;ye(()=>{if(n===(n=t()??"")){x&&ae();return}i!==void 0&&($e(i),i=void 0),n!==""&&(i=ne(()=>{if(x){N.data;for(var f=ae(),u=f;f!==null&&(f.nodeType!==8||f.data!=="");)u=f,f=Ee(f);if(f===null)throw at(),rt;de(N,u),o=P(f);return}var v=n+"",s=We(v);de(oe(s),s.lastChild),o.before(s)}))})}function mt(e){x&&oe(e)!==null&&Re(e)}let be=!1;function Ne(){be||(be=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const a of e.target.elements)(t=a.__on_r)==null||t.call(a)})},{capture:!0}))}function De(e){if(x){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;ge(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var l=e.checked;ge(e,"checked",null),e.checked=l}}};e.__on_r=a,lt(a),Ne()}}function ge(e,t,a,r){var l=e.__attributes??(e.__attributes={});x&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=a)&&(t==="loading"&&(e[ot]=a),e.removeAttribute(t))}function wt(e,t){var a=e.__className,r=yt(t);x&&e.className===r?e.__className=r:(a!==r||x&&e.className!==r)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function yt(e){return e??""}function B(e,t,a,r,l){var o=e.__attributes??(e.__attributes={}),n=e.style,i="style-"+t;o[i]===a&&!l||(o[i]=a,a==null?n.removeProperty(t):n.setProperty(t,a,""))}function kt(e,t,a,r=a){e.addEventListener(t,a);const l=e.__on_r;l?e.__on_r=()=>{l(),r()}:e.__on_r=r,Ne()}function le(e,t,a=t){var r=nt();kt(e,"input",()=>{var l=me(e)?we(e.value):e.value;a(l),r&&l!==(l=t())&&(e.value=l??"")}),st(()=>{var l=t();if(x&&e.defaultValue!==e.value){a(e.value);return}me(e)&&l===we(e.value)||e.type==="date"&&!l&&!e.value||(e.value=l??"")})}function me(e){var t=e.type;return t==="number"||t==="range"}function we(e){return e===""?null:+e}const V={color:"#fff",bold:!1,italic:!1,shadow:!1,width:"normal"},te="$",xt=["i","o","s","w","n","g","m","z","$"],At="0123456789ABCDEF";function Me(e){e[0]=="#"&&(e=e.slice(1));var t=parseInt(e,16),a=t>>16&255,r=t>>8&255,l=t&255;return[a,r,l]}function Rt(e,t,a){return"#"+(1<<24|e<<16|t<<8|a).toString(16).slice(1)}function $t(e,t,a){return"#"+[e,t,a].map(r=>Math.round(r/17).toString(16)).join("")}function Et(e){let t=Me(e);return $t(t[0],t[1],t[2])}function Tt(e){let t=Me(e);console.log(t);for(let a=0;a<3;a++)t[a]=Math.round(t[a]/17)*17;return console.log(t),Rt(t[0],t[1],t[2])}function It(e){switch(e){case"i":return 2;case"o":return 1;case"s":return 5;case"w":return 4;case"n":return 3;case"g":return 8;case"m":return 9;case"z":return 10;default:return 7}}function Ct(e){return e[0]!=te?{type:0,value:e[0]}:e.length==1?{type:0,value:""}:e.length>=4&&e.slice(1,4).split("").every(t=>At.includes(t.toUpperCase()))?{type:6,value:e.slice(1,4)}:e[1]==te?{type:0,value:te}:xt.includes(e[1])?{type:It(e[1]),value:""}:{type:7,value:e[1]}}function St(e){let t=[];for(let a=0;a<e.length;a++){let r=Ct(e.slice(a));switch(t.push(r),r.type){case 0:break;case 6:a+=3;break;default:a+=1;break}}return t}function Lt(e){let t=St(e);console.log(t);let a=[],r={...V},l=(o,n)=>o.color==n.color&&o.bold==n.bold&&o.italic==n.italic&&o.shadow==n.shadow&&o.width==n.width;for(const o of t){if(o.type==0||o.type==7){a.length==0||!l(a[a.length-1].style,r)?a.push({style:{...r},text:o.value}):a[a.length-1].text+=o.value;continue}switch(o.type){case 1:r.bold=!0;break;case 2:r.italic=!0;break;case 5:r.shadow=!0;break;case 4:r.width="wide";break;case 3:r.width="narrow";break;case 6:r.color="#"+o.value;break;case 8:r.color=V.color;break;case 9:r.width=V.width;break;case 10:r={...V};break}}return a}var Nt=X("<span> </span>"),Dt=X('<section><div id="result" class="svelte-dq4mpg"></div> <label for="bgcolor"><small>Background Color</small></label> <input id="bgcolor" type="color" class="svelte-dq4mpg"></section>');function Mt(e,t){Te(t,!0);let a=F("#808080"),r=dt(t,"tm_text",3,"");var l=Dt(),o=k(l);Se(o,21,()=>Lt(r()),Ce,(i,f)=>{var u=Nt(),v=k(u);w(u),Y(()=>{wt(u,`${b(f).style.width??""} svelte-dq4mpg`),B(u,"color",b(f).style.color),B(u,"font-weight",b(f).style.bold?"bold":"normal"),B(u,"font-style",b(f).style.italic?"italic":"normal"),B(u,"text-shadow",b(f).style.shadow?"1px 1px 2px black":"none"),re(v,b(f).text)}),H(i,u)}),w(o);var n=h(o,4);De(n),w(l),Y(()=>B(o,"background-color",b(a))),le(n,()=>b(a),i=>T(a,i)),H(e,l),Ie()}const Ot=[{code:"$w",name:"Wide",description:"All following text will be wide. <br />Reset by using Reset Width or Reset All Styles."},{code:"$n",name:"Narrow",description:"All following text will be narrow. <br />Reset by using Reset Width or Reset All Styles."},{code:"$m",name:"Reset Width",description:"Resets following text to default width."},{code:"$i",name:"Italic",description:"All following text will be italic. <br />Reset by using another Italic tag, or Reset All Styles."},{code:"$t",name:"Uppercase",description:"All following text will be in uppercase letters. <br /> Reset by using another Uppercase tag, or Reset All Styles."},{code:"$o",name:"Bold",description:"All following text will be bolded. <br />Reset by using another Bold tag, or Reset All Styles."},{code:"$s",name:"Shadow",description:"All following text will have a shadow. <br />Reset by using Reset All Styles. <br />Note: The shadow is not visible in TM2 as far as I can tell."},{code:"$hex",name:"Color",description:"All following text will have the specified color. <br/>Colors use 3-digit hexadecimal code, eg <code>$fff</code> for white. <br />Reset by using Reset Color or Reset All Styles.<br />Note: The game will also recognize 1 and 2 digit hex codes, i.e <code>$f</code> for red or <code>$0f</code> for green."},{code:"$g",name:"Reset Color",description:"Resets following text to default color."},{code:"$z",name:"Reset All Styles",description:"Resets everything to default."},{code:"$$",name:"Insert $ symbol",description:"Allows you to type a <code>$</code> without it being interpreted as a formatting tag."}],zt=[{code:"$l[URL]text",name:"External Link",description:"Link to an external site. <br />The [URL] part is optional, so e.g <code>$lhttps://example.com</code> will also work."},{code:"$h",name:"Internal Link",description:"Link to a manialink adress."},{code:"$p",name:"Playerscript Link",description:"Link to a player script returning a manialink."}];var Bt=X('<article><header class="flex" style="gap:1rem"><span> </span><code> </code></header> <small><!><small></small></small></article>'),Ft=(e,t)=>T(t,!1),Ht=(e,t)=>T(t,!0),Ut=(e,t)=>t("$w"),Wt=(e,t)=>t("$n"),qt=(e,t)=>t("$m"),Vt=(e,t)=>{t()},Pt=(e,t,a)=>t("$"+Et(b(a)).slice(1)),Yt=(e,t)=>t("$g"),Xt=(e,t)=>t("$i"),Gt=(e,t)=>t("$b"),Jt=(e,t)=>t("$s"),Kt=(e,t)=>t("$z"),Qt=X(`<main><h3>Trackmania Formatting Tool</h3> <p><small>This tool was tested on TM². Details may vary in other versions of Trackmania.</small></p> <dialog class="svelte-63iofe"><header><h4>Formatting Guide</h4></header> <div class="content svelte-63iofe"><p>To format your text, you can use the following modifiers:</p> <!> <p>The game also recognizes the following modifiers for links, but they are not supported by
				this tool for the sake of simplicity.</p> <!></div> <footer><button>Close</button></footer></dialog> <section><button class="success">Formatting Guide</button></section> <fieldset class="flex"><legend>Width modifiers</legend> <button><span class="roboto wide">Wide</span></button> <button><span class="robot narrow">Narrow</span></button> <button class="default">Reset</button></fieldset> <fieldset class="flex"><legend>Color modifiers</legend> <input type="color" style="width:3rem;height:3rem"> <button>Apply Color</button> <button class="default">Reset Color</button></fieldset> <fieldset class="flex"><legend>Style modifiers</legend> <button><i>Italic</i></button> <button><b>Bold</b></button> <button style="text-shadow: 1px 1px 2px black;">Drop Shadow</button> <button class="default">Reset All Styles</button></fieldset> <textarea class="svelte-63iofe"></textarea> <br> <!></main>`);function aa(e,t){Te(t,!0);const a=(E,Oe=ct)=>{var ce=qe(),ze=it(ce);Se(ze,17,Oe,Ce,(Be,J)=>{var K=Bt(),Q=k(K),Z=k(Q),Fe=k(Z);w(Z);var fe=h(Z),He=k(fe);w(fe),w(Q);var ue=h(Q,2),Ue=k(ue);gt(Ue,()=>b(J).description),ft(),w(ue),w(K),Y(()=>{re(Fe,b(J).name),re(He,`[${b(J).code??""}]`)}),H(Be,K)}),H(E,ce)};let r=F("$i$fff/$beeo$CFDnz$fff/$CFCf$CFDe$BEDo$BEEr"),l=F(null),o=F("#ffffff"),n=F(!1);function i(E){T(r,b(r)+E),b(l)&&b(l).focus()}function f(){T(o,vt(Tt(b(o)))),console.log(b(o))}var u=Qt(),v=h(k(u),4),s=h(k(v),2),g=h(k(s),2);a(g,()=>Ot);var _=h(g,4);a(_,()=>zt),w(s);var p=h(s,2),A=k(p);A.__click=[Ft,n],w(p),w(v);var y=h(v,2),$=k(y);$.__click=[Ht,n],w(y);var m=h(y,2),c=h(k(m),2);c.__click=[Ut,i];var d=h(c,2);d.__click=[Wt,i];var G=h(d,2);G.__click=[qt,i],w(m);var C=h(m,2),R=h(k(C),2);De(R),R.__input=[Vt,f];var M=h(R,2);M.__click=[Pt,i,o];var O=h(M,2);O.__click=[Yt,i],w(C);var I=h(C,2),D=h(k(I),2);D.__click=[Xt,i];var U=h(D,2);U.__click=[Gt,i];var z=h(U,2);z.__click=[Jt,i];var W=h(z,2);W.__click=[Kt,i],w(I);var L=h(I,2);_t(L,E=>T(l,E),()=>b(l)),mt(L);var q=h(L,4);Mt(q,{get tm_text(){return b(r)}}),w(u),Y(()=>v.open=b(n)||null),le(R,()=>b(o),E=>T(o,E)),le(L,()=>b(r),E=>T(r,E)),H(e,u),Ie()}ut(["click","input"]);export{aa as component};
