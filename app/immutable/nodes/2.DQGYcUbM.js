import{a as H,t as z}from"../chunks/disclose-version.CmRpAfET.js";import{J as ae,b as re,h as m,T as M,V as ne,M as J,t as le,_ as Z,ad as se,ae as O,R as L,c as E,W as ie,af as G,a as K,ag as oe,ak as ce,m as V,j as $,al as ue,am as _e,H as fe,s as P,an as ve,ao as de,Z as Q,ap as he,d as be,O as pe,aq as ye,v as ke,p as me,e as ge,aa as D,ab as T,a9 as we,l as y,aj as U,ac as k}from"../chunks/runtime.DdLn41eu.js";import{s as xe,d as Ee}from"../chunks/render.COzgi1Lg.js";import{p as $e,b as Te}from"../chunks/props.DqXCFJNr.js";let F=null;function Ie(e,t){return t}function Ae(e,t,a,r){for(var s=[],l=t.length,n=0;n<l;n++)de(t[n].e,s,!0);var o=l>0&&s.length===0&&a!==null;if(o){var b=a.parentNode;Q(b),b.append(a),r.clear(),w(e,t[0].prev,t[l-1].next)}he(s,()=>{for(var i=0;i<l;i++){var _=t[i];o||(r.delete(_.k),w(e,_.prev,_.next)),be(_.e,!o)}})}function Ce(e,t,a,r,s,l=null){var n=e,o={flags:t,items:new Map,first:null};{var b=e;n=m?M(J(b)):b.appendChild(ae())}m&&ne();var i=null;re(()=>{var _=a(),c=le(_)?_:_==null?[]:Z(_),f=c.length;let h=!1;if(m){var d=n.data===se;d!==(f===0)&&(n=O(),M(n),L(!1),h=!0)}if(m){for(var p=null,u,v=0;v<f;v++){if(E.nodeType===8&&E.data===ie){n=E,h=!0,L(!1);break}var I=c[v],x=r(I,v);u=j(E,o,p,null,I,x,v,s,t),o.items.set(x,u),p=u}f>0&&M(O())}m||De(c,o,n,s,t,r),l!==null&&(f===0?i?G(i):i=K(()=>l(n)):i!==null&&oe(i,()=>{i=null})),h&&L(!0)}),m&&(n=E)}function De(e,t,a,r,s,l){var n=e.length,o=t.items,b=t.first,i=b,_,c=null,f=[],h=[],d,p,u,v;for(v=0;v<n;v+=1){if(d=e[v],p=l(d,v),u=o.get(p),u===void 0){var I=i?i.e.nodes_start:a;c=j(I,t,c,c===null?t.first:c.next,d,p,v,r,s),o.set(p,c),f=[],h=[],i=c.next;continue}if(Ne(u,d,v),u.e.f&ce&&G(u.e),u!==i){if(_!==void 0&&_.has(u)){if(f.length<h.length){var x=h[0],g;c=x.prev;var B=f[0],N=f[f.length-1];for(g=0;g<f.length;g+=1)W(f[g],x,a);for(g=0;g<h.length;g+=1)_.delete(h[g]);w(t,B.prev,N.next),w(t,c,B),w(t,N,x),i=x,c=N,v-=1,f=[],h=[]}else _.delete(u),W(u,i,a),w(t,u.prev,u.next),w(t,u,c===null?t.first:c.next),w(t,c,u),c=u;continue}for(f=[],h=[];i!==null&&i.k!==p;)(_??(_=new Set)).add(i),h.push(i),i=i.next;if(i===null)continue;u=i}f.push(u),c=u,i=u.next}if(i!==null||_!==void 0){for(var R=_===void 0?[]:Z(_);i!==null;)R.push(i),i=i.next;var ee=R.length;if(ee>0){var te=n===0?a:null;Ae(t,R,te,o)}}V.first=t.first&&t.first.e,V.last=c&&c.e}function Ne(e,t,a,r){$(e.v,t),e.i=a}function j(e,t,a,r,s,l,n,o,b){var i=F;try{var _=(b&ue)!==0,c=(b&_e)===0,f=_?c?fe(s):P(s):s,h=b&ve?P(n):n,d={i:h,v:f,k:l,a:null,e:null,prev:a,next:r};return F=d,d.e=K(()=>o(e,f,h),m),d.e.prev=a&&a.e,d.e.next=r&&r.e,a===null?t.first=d:(a.next=d,a.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{F=i}}function W(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,s=t?t.e.nodes_start:a,l=e.e.nodes_start;l!==r;){var n=pe(l);s.before(l),l=n}}function w(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Re(e){m&&J(e)!==null&&Q(e)}let X=!1;function Me(){X||(X=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const a of e.target.elements)(t=a.__on_r)==null||t.call(a)})},{capture:!0}))}function Le(e,t){var a=e.__className,r=Fe(t);m&&e.className===r?e.__className=r:(a!==r||m&&e.className!==r)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function Fe(e){return e??""}function A(e,t,a,r,s){var l=e.__attributes??(e.__attributes={}),n=e.style,o="style-"+t;l[o]===a&&!s||(l[o]=a,a==null?n.removeProperty(t):n.setProperty(t,a,""))}function Se(e,t,a,r=a){e.addEventListener(t,a);const s=e.__on_r;s?e.__on_r=()=>{s(),r()}:e.__on_r=r,Me()}function He(e,t,a=t){var r=ye();Se(e,"input",()=>{var s=Y(e)?q(e.value):e.value;a(s),r&&s!==(s=t())&&(e.value=s??"")}),ke(()=>{var s=t();if(m&&e.defaultValue!==e.value){a(e.value);return}Y(e)&&s===q(e.value)||e.type==="date"&&!s&&!e.value||(e.value=s??"")})}function Y(e){var t=e.type;return t==="number"||t==="range"}function q(e){return e===""?null:+e}const C={color:"#fff",bold:!1,italic:!1,shadow:!1,width:"normal"},S="$",ze=["i","o","s","w","n","g","m","z","$"],Be="0123456789ABCDEF";function Oe(e){switch(e){case"i":return 2;case"o":return 1;case"s":return 5;case"w":return 4;case"n":return 3;case"g":return 8;case"m":return 9;case"z":return 10;default:return 7}}function Ve(e){return e[0]!=S?{type:0,value:e[0]}:e.length==1?{type:0,value:""}:e.length>=4&&e.slice(1,4).split("").every(t=>Be.includes(t.toUpperCase()))?{type:6,value:e.slice(1,4)}:e[1]==S?{type:0,value:S}:ze.includes(e[1])?{type:Oe(e[1]),value:""}:{type:7,value:e[1]}}function Pe(e){let t=[];for(let a=0;a<e.length;a++){let r=Ve(e.slice(a));switch(t.push(r),r.type){case 0:break;case 6:a+=3;break;default:a+=1;break}}return t}function Ue(e){let t=Pe(e),a=[],r={...C},s=(l,n)=>l.color==n.color&&l.bold==n.bold&&l.italic==n.italic&&l.shadow==n.shadow&&l.width==n.width;for(const l of t){if(l.type==0||l.type==7){a.length==0||!s(a[a.length-1].style,r)?a.push({style:{...r},text:l.value}):a[a.length-1].text+=l.value;continue}switch(l.type){case 1:r.bold=!0;break;case 2:r.italic=!0;break;case 5:r.shadow=!0;break;case 4:r.width="wide";break;case 3:r.width="narrow";break;case 6:r.color="#"+l.value;break;case 8:r.color=C.color;break;case 9:r.width=C.width;break;case 10:r={...C};break}}return a}var We=z("<span> </span>"),Xe=z('<main><div id="result" class="svelte-1obcjhb"></div></main>');function Ye(e,t){me(t,!0);let a=$e(t,"tm_text",3,"");var r=Xe(),s=D(r);Ce(s,21,()=>Ue(a()),Ie,(l,n)=>{var o=We(),b=D(o);T(o),we(()=>{Le(o,`${y(n).style.width??""} svelte-1obcjhb`),A(o,"color",y(n).style.color),A(o,"font-weight",y(n).style.bold?"bold":"normal"),A(o,"font-style",y(n).style.italic?"italic":"normal"),A(o,"text-shadow",y(n).style.shadow?"1px 1px 2px black":"none"),xe(b,y(n).text)}),H(l,o)}),T(s),T(r),H(e,r),ge()}var qe=(e,t)=>$(t,""),Je=(e,t)=>t("$w"),Ze=(e,t)=>t("$n"),Ge=(e,t)=>t("$i"),Ke=(e,t)=>t("$b"),Qe=(e,t)=>t("$s"),je=(e,t)=>t("$g"),et=(e,t)=>t("$n"),tt=(e,t)=>t("$z"),at=z('<main><h3>Trackmania Formatting Tool</h3> <div class="grid svelte-1cyf151"><button>Clear</button> <button>Wide</button> <button>Narrow</button> <button>Italic</button> <button>Bold</button> <button>Shadow</button> <button>Reset Color</button> <button>Reset Width</button> <button>Reset Styles</button></div> <textarea class="svelte-1cyf151"></textarea> <br> <!></main>');function it(e){let t=U("$i$fff/$beeo$CFDnz$fff/$CFCf$CFDe$BEDo$BEEr"),a=U(null);function r(v){$(t,y(t)+v),y(a)&&y(a).focus()}var s=at(),l=k(D(s),2),n=D(l);n.__click=[qe,t];var o=k(n,2);o.__click=[Je,r];var b=k(o,2);b.__click=[Ze,r];var i=k(b,2);i.__click=[Ge,r];var _=k(i,2);_.__click=[Ke,r];var c=k(_,2);c.__click=[Qe,r];var f=k(c,2);f.__click=[je,r];var h=k(f,2);h.__click=[et,r];var d=k(h,2);d.__click=[tt,r],T(l);var p=k(l,2);Te(p,v=>$(a,v),()=>y(a)),Re(p);var u=k(p,4);Ye(u,{get tm_text(){return y(t)}}),T(s),He(p,()=>y(t),v=>$(t,v)),H(e,s)}Ee(["click"]);export{it as component};
